version: "3.9"

services:
  ci:
    build:
      context: .
      dockerfile: ./Dockerfile
    container_name: "teamcity"
    image: "docker-teamcity-image"
    privileged: true
    ports:
      - "8111:8111"
    restart: always
    volumes:
      - ./agent:/opt/TeamCity/buildAgent
      - ./config:/opt/TeamCity/conf
      - ./data:/root/.BuildServer
      - ./licenses:/opt/TeamCity/licenses
      - ./logs:/opt/TeamCity/logs
      - ./temp:/opt/TeamCity/temp
      - ./webapp:/opt/TeamCity/webapp
      - ./work:/opt/TeamCity/work
      - /etc/localtime:/etc/localtime:ro
      - /var/run/docker.sock:/var/run/docker.sock:ro
